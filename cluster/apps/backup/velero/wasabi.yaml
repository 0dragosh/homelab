---
apiVersion: velero.io/v1
kind: BackupStorageLocation
metadata:
  name: wasabi
  namespace: backup
spec:
  credential:
    key: cloud
    name: wasabi-credentials
  provider: velero.io/aws
  objectStorage:
    bucket: velero-restic
    prefix: homelab-velero
  config:
    region: default
    s3ForcePathStyle: "true"
    s3Url: "http://s3.eu-central-1.wasabisys.com"
    signatureVersion: "1"
    profile: "default"
---
apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: wasabi-backup
  namespace: backup
spec:
  schedule: "10 6 * * 0"
  useOwnerReferencesInBackup: true
  template:
    ttl: "336h"
